<style>
#messages_table {
	overflow-y: scroll;
	overflow-x: hidden;
	height: 55vh;
	width:100%;
}
#main {
	width:70%;
	left:15%;
	position:relative;
}
/*
#message_text{
padding:5px;
width:50%;
}*/
a{
color:#00B85C;
}
a:hover{
color:#00743A;
}
hr{
color:#eee;
background-color:#eee;
height:1px;
}
</style>

<%= render partial:"bubble_style" %>
<%= render partial:"messages_script" %>

<div id="main">
<div id="title" style="clear:both;"><a href="/"><span class="glyphicon glyphicon-arrow-left" style="font-size:20px;"></span></a>
<span style="font-size:35px;font-weight:bold;color:#00743A;">&nbsp;&nbsp;<%= @group.name %></span>
<a href="<%= @group.id %>/qr" style="float:right;font-size:150%;">
<span class="glyphicon glyphicon-qrcode">
</span>
Share
</a>
</div>
<hr style="clear:both;"/>
<div id="messages_table">

  <% @messages.each do |message| %>
		<div class="bubble <%= raw (message.user == current_user)? 'bubble--alt':"" %>">
			<%= message.user.name %>:
			<% if message.has_image %>
			<% size = message.limit_img_tag_size(500) %>
			<%= image_tag(message.image.url, size: "#{size[0]}x#{size[1]}", alt: "image") %>
			<% end %>
      <%= message.text %>
    </div>
  <% end %>

</div>
<hr style="clear:both;"/>
<div style="text-align:center;">
<%= form_tag(group_messages_path(params[:id]), method: :post, remote: true, multipart: true, id:'message_form', style:'display:none;') do %>
<%= hidden_field_tag :text,'OK' %>
<%= file_field_tag :image %>
<% end %>

<div class="row">
<div class="col-xs-10">
  <div class="input-group">
    <input type="text" id="message_text" class="form-control" placeholder="Enter message here..." autofocus/>
    <span class="input-group-btn">
      <button class="btn btn-default" id="open_image" onclick="$('#message_form #image').click(); return false" type="button">Image</button>
    </span>
  </div>
</div>

<div  class="col-xs-2-pull-right">
<input type="button" style="display:inline_block;" class="btn btn-success" onclick="send_message(); $('#message_text').focus();" value="send"/>
</div>

</div>
</div>
</div>
